<header class="header">
  <div class="header-container">
    <div class="logo">
      <a routerLink="/products" style="cursor: pointer;">
        <div class="logo-icon">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Роза как символ красоты -->
            <circle cx="20" cy="20" r="18" fill="url(#roseGradient)" stroke="url(#borderGradient)" stroke-width="2"/>
            <!-- Лепестки розы -->
            <path d="M20 8C22 6 26 8 24 12C22 16 20 18 20 20C20 18 18 16 16 12C14 8 18 6 20 8Z" fill="url(#petalGradient)"/>
            <path d="M20 8C18 6 14 8 16 12C18 16 20 18 20 20C20 18 22 16 24 12C26 8 22 6 20 8Z" fill="url(#petalGradient)"/>
            <path d="M20 8C22 6 26 8 24 12C22 16 20 18 20 20C20 18 18 16 16 12C14 8 18 6 20 8Z" fill="url(#petalGradient)" transform="rotate(45 20 20)"/>
            <path d="M20 8C18 6 14 8 16 12C18 16 20 18 20 20C20 18 22 16 24 12C26 8 22 6 20 8Z" fill="url(#petalGradient)" transform="rotate(-45 20 20)"/>
            <!-- Центр розы -->
            <circle cx="20" cy="20" r="4" fill="url(#centerGradient)"/>
            <!-- Градиенты -->
            <defs>
              <linearGradient id="roseGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea"/>
                <stop offset="100%" style="stop-color:#764ba2"/>
              </linearGradient>
              <linearGradient id="borderGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#4c63d2"/>
                <stop offset="100%" style="stop-color:#5a4f8c"/>
              </linearGradient>
              <linearGradient id="petalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#ff6b9d"/>
                <stop offset="100%" style="stop-color:#c44569"/>
              </linearGradient>
              <linearGradient id="centerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#feca57"/>
                <stop offset="100%" style="stop-color:#ff9ff3"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <h1>Krasota<span class="accent">72</span></h1>
      </a>
    </div>
    
    <!-- Desktop Navigation -->
    <nav class="nav-desktop">
      <a routerLink="/products" class="nav-link" [class.active]="isActiveRoute('/products')">Товары</a>
      <a routerLink="/categories" class="nav-link" [class.active]="isActiveRoute('/categories')">Категории</a>
      <a routerLink="/about" class="nav-link" [class.active]="isActiveRoute('/about')">О нас</a>
      <a routerLink="/contacts" class="nav-link" [class.active]="isActiveRoute('/contacts')">Контакты</a>
      <a routerLink="/cart" class="nav-link cart-icon" [class.active]="isActiveRoute('/cart')">
        <span class="cart-text">Корзина</span>
        <span class="cart-count" *ngIf="itemCount > 0">{{ itemCount }}</span>
      </a>
      
      <!-- Аутентификация -->
      <ng-container *ngIf="!(isAuthenticated$ | async); else userMenu">
        <a (click)="login()" class="nav-link auth-link" style="cursor: pointer;">Войти</a>
      </ng-container>
      
      <ng-template #userMenu>
        <div class="user-menu">
          <button class="user-menu-btn" (click)="goToProfile()">
            <span class="user-avatar">{{ (currentUser$ | async)?.username?.charAt(0)?.toUpperCase() }}</span>
            <span class="username">{{ (currentUser$ | async)?.username }}</span>
          </button>
          <button *ngIf="(currentUser$ | async)?.role === 'admin'" class="admin-btn" (click)="goToAdmin()" title="Админ панель">
            <svg class="admin-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
          </button>
          <button class="logout-btn" (click)="logout()">Выйти</button>
        </div>
      </ng-template>
    </nav>

    <!-- Mobile Controls -->
    <div class="mobile-controls">
      <div class="cart-icon-mobile" (click)="goToCart()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="cart-count" *ngIf="itemCount > 0">{{ itemCount }}</span>
      </div>
      <button class="mobile-menu-btn" [class.active]="showMobileMenu" (click)="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <nav class="nav-mobile" [class.active]="showMobileMenu">
      <a routerLink="/products" class="nav-link" [class.active]="isActiveRoute('/products')" (click)="closeMobileMenu()">Товары</a>
      <a routerLink="/categories" class="nav-link" [class.active]="isActiveRoute('/categories')" (click)="closeMobileMenu()">Категории</a>
      <a routerLink="/about" class="nav-link" [class.active]="isActiveRoute('/about')" (click)="closeMobileMenu()">О нас</a>
      <a routerLink="/contacts" class="nav-link" [class.active]="isActiveRoute('/contacts')" (click)="closeMobileMenu()">Контакты</a>
      <a routerLink="/cart" class="nav-link cart-icon" [class.active]="isActiveRoute('/cart')" (click)="closeMobileMenu()">
        <span class="cart-text">Корзина</span>
        <span class="cart-count" *ngIf="itemCount > 0">{{ itemCount }}</span>
      </a>
      
      <!-- Аутентификация для мобильных -->
      <ng-container *ngIf="!(isAuthenticated$ | async); else userMenuMobile">
        <a (click)="login()" class="nav-link auth-link" (click)="closeMobileMenu()" style="cursor: pointer;">Войти</a>
      </ng-container>
      
      <ng-template #userMenuMobile>
        <div class="user-menu-mobile">
          <div class="user-info">
            <span class="user-avatar">{{ (currentUser$ | async)?.username?.charAt(0)?.toUpperCase() }}</span>
            <span class="username">{{ (currentUser$ | async)?.username }}</span>
          </div>
          <a (click)="goToProfile()" class="nav-link" (click)="closeMobileMenu()" style="cursor: pointer;">Профиль</a>
          <a *ngIf="(currentUser$ | async)?.role === 'admin'" (click)="goToAdmin()" class="nav-link" (click)="closeMobileMenu()" style="cursor: pointer;">
            <svg class="admin-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            Админ панель
          </a>
          <a (click)="logout()" class="nav-link" (click)="closeMobileMenu()" style="cursor: pointer;">Выйти</a>
        </div>
      </ng-template>
    </nav>
  </div>
</header>
