<header class="header">
  <div class="header-container">
    <div class="logo">
      <a (click)="goToHome()" style="cursor: pointer;">
        <div class="logo-icon">
          <!-- Показываем весь логотип с лотосом и текстом -->
          <img src="assets/images/lotus.png" alt="Krasota72" 
               style="height: 50px; width: auto; object-fit: contain;" />
        </div>
      </a>
    </div>
    
    <!-- Desktop Navigation -->
    <nav class="nav-desktop">
      <a routerLink="/products" class="nav-link" [class.active]="isActiveRoute('/products')">Товары</a>
      <a routerLink="/categories" class="nav-link" [class.active]="isActiveRoute('/categories')">Категории</a>
      <a routerLink="/about" class="nav-link" [class.active]="isActiveRoute('/about')">О нас</a>
      <a routerLink="/contacts" class="nav-link" [class.active]="isActiveRoute('/contacts')">Контакты</a>
      <a routerLink="/cart" class="nav-link cart-icon" [class.active]="isActiveRoute('/cart')">
        <span class="cart-text">Корзина</span>
        <span class="cart-count" *ngIf="itemCount > 0">{{ itemCount }}</span>
      </a>
      
      <!-- Аутентификация -->
      <ng-container *ngIf="!(isAuthenticated$ | async); else userMenu">
        <a (click)="login()" class="nav-link auth-link" style="cursor: pointer;">Войти</a>
      </ng-container>
      
      <ng-template #userMenu>
        <div class="user-menu">
          <button class="user-menu-btn" (click)="goToProfile()">
            <span class="user-avatar">{{ (currentUser$ | async)?.username?.charAt(0)?.toUpperCase() }}</span>
            <span class="username">{{ (currentUser$ | async)?.username }}</span>
          </button>
          <button *ngIf="(currentUser$ | async)?.role === 'admin'" class="admin-btn" (click)="goToAdmin()" title="Админ панель">
            <svg class="admin-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
          </button>
          <button class="logout-btn" (click)="logout()">Выйти</button>
        </div>
      </ng-template>
    </nav>

    <!-- Mobile Controls -->
    <div class="mobile-controls">
      <div class="cart-icon-mobile" (click)="goToCart()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="cart-count" *ngIf="itemCount > 0">{{ itemCount }}</span>
      </div>
      <button class="mobile-menu-btn" [class.active]="showMobileMenu" (click)="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <nav class="nav-mobile" [class.active]="showMobileMenu">
      <a routerLink="/products" class="nav-link" [class.active]="isActiveRoute('/products')" (click)="closeMobileMenu()">Товары</a>
      <a routerLink="/categories" class="nav-link" [class.active]="isActiveRoute('/categories')" (click)="closeMobileMenu()">Категории</a>
      <a routerLink="/about" class="nav-link" [class.active]="isActiveRoute('/about')" (click)="closeMobileMenu()">О нас</a>
      <a routerLink="/contacts" class="nav-link" [class.active]="isActiveRoute('/contacts')" (click)="closeMobileMenu()">Контакты</a>
      <a routerLink="/cart" class="nav-link cart-icon" [class.active]="isActiveRoute('/cart')" (click)="closeMobileMenu()">
        <span class="cart-text">Корзина</span>
        <span class="cart-count" *ngIf="itemCount > 0">{{ itemCount }}</span>
      </a>
      
      <!-- Аутентификация для мобильных -->
      <ng-container *ngIf="!(isAuthenticated$ | async); else userMenuMobile">
        <a (click)="login()" class="nav-link auth-link" (click)="closeMobileMenu()" style="cursor: pointer;">Войти</a>
      </ng-container>
      
      <ng-template #userMenuMobile>
        <div class="user-menu-mobile">
          <div class="user-info">
            <span class="user-avatar">{{ (currentUser$ | async)?.username?.charAt(0)?.toUpperCase() }}</span>
            <span class="username">{{ (currentUser$ | async)?.username }}</span>
          </div>
          <a (click)="goToProfile()" class="nav-link" (click)="closeMobileMenu()" style="cursor: pointer;">Профиль</a>
          <a *ngIf="(currentUser$ | async)?.role === 'admin'" (click)="goToAdmin()" class="nav-link" (click)="closeMobileMenu()" style="cursor: pointer;">
            <svg class="admin-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            Админ панель
          </a>
          <a (click)="logout()" class="nav-link" (click)="closeMobileMenu()" style="cursor: pointer;">Выйти</a>
        </div>
      </ng-template>
    </nav>
  </div>
</header>
