<!-- Header —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
<app-header></app-header>

<main class="cart-page">
  <div class="container">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <h1>–ö–æ—Ä–∑–∏–Ω–∞</h1>
        <p>–û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑ –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫—Ä–∞—Ç—á–∞–π—à–∏–µ —Å—Ä–æ–∫–∏</p>
      </div>
    </section>

    <!-- Cart Content -->
    <section class="cart-content">
      <div class="cart-layout">
        <!-- Cart Items -->
        <div class="cart-items-section">
          <div class="section-header">
            <h2>–¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ ({{ cartItems.length }})</h2>
            <button *ngIf="cartItems.length > 0" class="clear-cart-btn" (click)="clearCart()">
              –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
            </button>
          </div>

          <!-- Empty Cart State -->
          <div *ngIf="cartItems.length === 0" class="empty-cart">
            <div class="empty-cart-icon">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
            </div>
            <h3>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
            <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É, —á—Ç–æ–±—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</p>
            <a routerLink="/products" class="continue-shopping-btn">
              –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏
            </a>
          </div>

          <!-- Cart Items List -->
          <div *ngIf="cartItems.length > 0" class="cart-items-list">
            <div *ngFor="let item of cartItems; let i = index" class="cart-item">
              <div class="item-image">
                <img 
                  [src]="item.image_url || 'assets/images/placeholder.svg'" 
                  [alt]="item.name"
                  (error)="onImageError($event)"
                >
                <div *ngIf="item.stock === 0" class="out-of-stock-badge">
                  –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏
                </div>
              </div>
              
              <div class="item-details">
                <h3 class="item-name">{{ item.name }}</h3>
                <p class="item-category">{{ item.category_name || '–ö–∞—Ç–µ–≥–æ—Ä–∏—è' }}</p>
                <div class="item-price">{{ formatPrice(item.price) }}</div>
              </div>
              
              <div class="item-quantity">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                <div class="quantity-controls">
                  <button 
                    class="quantity-btn" 
                    (click)="decreaseQuantity(i)"
                    [disabled]="item.quantity <= 1"
                  >
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                  </button>
                  <span class="quantity-value">{{ item.quantity }}</span>
                  <button class="quantity-btn" (click)="increaseQuantity(i)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="12" y1="5" x2="12" y2="19"></line>
                      <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                  </button>
                </div>
              </div>
              
              <div class="item-total">
                <div class="total-price">{{ formatPrice(item.price * item.quantity) }}</div>
                <button class="remove-item-btn" (click)="removeItem(i)">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary-section">
          <div class="summary-card">
            <h3>–ò—Ç–æ–≥–æ –∑–∞–∫–∞–∑–∞</h3>
            
            <div class="summary-row">
              <span>–¢–æ–≤–∞—Ä—ã ({{ getTotalItems() }}):</span>
              <span>{{ formatPrice(getSubtotal()) }}</span>
            </div>
            
            <div class="summary-row">
              <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
              <span>{{ formatPrice(getShippingCost()) }}</span>
            </div>
            
            <div *ngIf="getDiscount() > 0" class="summary-row discount">
              <span>–°–∫–∏–¥–∫–∞:</span>
              <span>-{{ formatPrice(getDiscount()) }}</span>
            </div>
            
            <div class="summary-row total">
              <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
              <span>{{ formatPrice(getTotal()) }}</span>
            </div>
            
            <button 
              class="checkout-btn" 
              (click)="proceedToCheckout()"
              [disabled]="!canCheckout()"
            >
              –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
            </button>
            
            <div class="payment-methods">
              <h4>–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</h4>
              <div class="payment-icons">
                <div class="payment-icon">üí≥</div>
                <div class="payment-icon">üè¶</div>
                <div class="payment-icon">üì±</div>
              </div>
            </div>
          </div>
          
          <!-- Promo Code -->
          <div class="promo-card">
            <h4>–ü—Ä–æ–º–æ–∫–æ–¥</h4>
            <div class="promo-input">
              <input 
                type="text" 
                placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥"
                [(ngModel)]="promoCode"
                name="promoCode"
              >
              <button class="apply-promo-btn" (click)="applyPromoCode()">
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å
              </button>
            </div>
            <p class="promo-info">–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏</p>
          </div>
          
          <!-- Delivery Info -->
          <div class="delivery-info">
            <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</h4>
            <div class="delivery-options">
              <div class="delivery-option">
                <div class="delivery-icon">üöö</div>
                <div>
                  <h5>–ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</h5>
                  <p>1-3 –¥–Ω—è ‚Ä¢ –æ—Ç 300‚ÇΩ</p>
                </div>
              </div>
              <div class="delivery-option">
                <div class="delivery-icon">üì¶</div>
                <div>
                  <h5>–ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏</h5>
                  <p>3-7 –¥–Ω–µ–π ‚Ä¢ –æ—Ç 200‚ÇΩ</p>
                </div>
              </div>
              <div class="delivery-option">
                <div class="delivery-icon">üè™</div>
                <div>
                  <h5>–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏</h5>
                  <p>1-2 –¥–Ω—è ‚Ä¢ –æ—Ç 150‚ÇΩ</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


  </div>
</main>

<!-- Footer -->
<app-footer></app-footer>
