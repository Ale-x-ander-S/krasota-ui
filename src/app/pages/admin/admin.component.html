<div class="admin-container">
  <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
  <div *ngIf="notification.show" class="notification" [class]="'notification-' + notification.type">
    <div class="notification-content">
      <span class="notification-icon">
        {{ notification.type === 'success' ? '‚úÖ' : '‚ùå' }}
      </span>
      <span class="notification-message">{{ notification.message }}</span>
      <button class="notification-close" (click)="hideNotification()">√ó</button>
    </div>
  </div>

  <div class="admin-header">
    <div class="header-content">
      <div class="header-text">
        <h1>–ö–∞–±–∏–Ω–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ currentUser?.username }}!</p>
      </div>
      <button class="exit-btn" (click)="exitAdmin()">
        <span class="exit-icon">üö™</span>
        –í—ã–π—Ç–∏ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞
      </button>
    </div>
  </div>

  <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–∫–µ–Ω–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) -->
  <div class="debug-info" *ngIf="showDebugInfo">
    <h3>üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–∫–µ–Ω–µ</h3>
    <div class="debug-grid">
      <div class="debug-item">
        <strong>–¢–æ–∫–µ–Ω:</strong>
        <code>{{ authService.getToken() | slice:0:50 }}...</code>
      </div>
      <div class="debug-item">
        <strong>–†–æ–ª—å –∏–∑ —Ç–æ–∫–µ–Ω–∞:</strong>
        <span class="debug-value">{{ authService.getRoleFromToken() || '–ù–µ –Ω–∞–π–¥–µ–Ω–æ' }}</span>
      </div>
      <div class="debug-item">
        <strong>ID –∏–∑ —Ç–æ–∫–µ–Ω–∞:</strong>
        <span class="debug-value">{{ authService.getUserIdFromToken() || '–ù–µ –Ω–∞–π–¥–µ–Ω–æ' }}</span>
      </div>
      <div class="debug-item">
        <strong>–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong>
        <pre class="debug-json">{{ authService.getTokenInfo() | json }}</pre>
      </div>
    </div>
    <button class="debug-toggle" (click)="toggleDebugInfo()">
      {{ showDebugInfo ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–∫–∞–∑–∞—Ç—å' }} –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    </button>
  </div>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ç–∞–±–∞–º -->
  <div class="admin-tabs">
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'dashboard'"
      (click)="setActiveTab('dashboard')"
    >
      üìä –î–∞—à–±–æ—Ä–¥
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'orders'"
      (click)="setActiveTab('orders')"
    >
      üì¶ –ó–∞–∫–∞–∑—ã
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'users'"
      (click)="setActiveTab('users')"
    >
      üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'products'"
      (click)="setActiveTab('products')"
    >
      üõçÔ∏è –¢–æ–≤–∞—Ä—ã
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeTab === 'categories'"
      (click)="setActiveTab('categories')"
    >
      üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
    </button>
  </div>

  <!-- –î–∞—à–±–æ—Ä–¥ -->
  <div *ngIf="activeTab === 'dashboard'" class="tab-content dashboard-tab">
    <h2>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-content">
          <h3>{{ stats.totalUsers }}</h3>
          <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üõçÔ∏è</div>
        <div class="stat-content">
          <h3>{{ stats.totalProducts }}</h3>
          <p>–¢–æ–≤–∞—Ä–æ–≤</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìÇ</div>
        <div class="stat-content">
          <h3>{{ stats.totalCategories }}</h3>
          <p>–ö–∞—Ç–µ–≥–æ—Ä–∏–π</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üì¶</div>
        <div class="stat-content">
          <h3>{{ stats.totalOrders }}</h3>
          <p>–ó–∞–∫–∞–∑–æ–≤</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-content">
          <h3>{{ formatPrice(stats.totalRevenue) }}</h3>
          <p>–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</p>
        </div>
      </div>
      
      <div class="stat-card warning">
        <div class="stat-icon">‚è≥</div>
        <div class="stat-content">
          <h3>{{ stats.pendingOrders }}</h3>
          <p>–û–∂–∏–¥–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏</p>
        </div>
      </div>
      
      <div class="stat-card danger">
        <div class="stat-icon">‚ö†Ô∏è</div>
        <div class="stat-content">
          <h3>{{ stats.lowStockProducts }}</h3>
          <p>–ù–∏–∑–∫–∏–π –∑–∞–ø–∞—Å</p>
        </div>
      </div>
    </div>

    <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
    <div class="analytics-section">
      <h3>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
      <div class="analytics-grid">
        <div class="analytics-card">
          <div class="analytics-icon">üìà</div>
          <div class="analytics-content">
            <h4>–ü—Ä–æ–¥–∞–∂–∏ –∑–∞ –º–µ—Å—è—Ü</h4>
            <p class="analytics-value">{{ formatPrice(1245000) }}</p>
            <span class="analytics-change positive">+12.5%</span>
          </div>
        </div>
        
        <div class="analytics-card">
          <div class="analytics-icon">üÜï</div>
          <div class="analytics-content">
            <h4>–ù–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h4>
            <p class="analytics-value">+{{ newUsersCount }}</p>
            <span class="analytics-change positive">+15.2%</span>
          </div>
        </div>
        
        <div class="analytics-card">
          <div class="analytics-icon">üî•</div>
          <div class="analytics-content">
            <h4>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h4>
            <p class="analytics-value">{{ popularProductsCount }}</p>
            <span class="analytics-change neutral">–°—Ç–∞–±–∏–ª—å–Ω–æ</span>
          </div>
        </div>
        
        <div class="analytics-card">
          <div class="analytics-icon">üìä</div>
          <div class="analytics-content">
            <h4>–ö–æ–Ω–≤–µ—Ä—Å–∏—è</h4>
            <p class="analytics-value">3.2%</p>
            <span class="analytics-change positive">+0.8%</span>
          </div>
        </div>
      </div>
    </div>

    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã -->
    <div class="recent-section">
      <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã</h3>
      <div class="table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>–ö–ª–∏–µ–Ω—Ç</th>
              <th>Email</th>
              <th>–°—É–º–º–∞</th>
              <th>–°—Ç–∞—Ç—É—Å</th>
              <th>–î–∞—Ç–∞</th>
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of recentOrders">
              <td>#{{ order.id }}</td>
              <td>{{ order.customerName }}</td>
              <td>{{ order.customerEmail }}</td>
              <td>{{ formatPrice(order.total) }}</td>
              <td>
                <span class="status-badge" [class]="getStatusClass(order.status)">
                  {{ getStatusText(order.status) }}
                </span>
              </td>
              <td>{{ formatDate(order.date) }}</td>
              <td>
                <button class="btn btn-small" (click)="viewOrderDetails(order)">üëÅÔ∏è</button>
                <select class="status-select" (change)="updateOrderStatus(order, $event)">
                  <option value="pending" [selected]="order.status === 'pending'">–û–∂–∏–¥–∞–µ—Ç</option>
                  <option value="processing" [selected]="order.status === 'processing'">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</option>
                  <option value="shipped" [selected]="order.status === 'shipped'">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω</option>
                  <option value="delivered" [selected]="order.status === 'delivered'">–î–æ—Å—Ç–∞–≤–ª–µ–Ω</option>
                  <option value="cancelled" [selected]="order.status === 'cancelled'">–û—Ç–º–µ–Ω–µ–Ω</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- –ó–∞–∫–∞–∑—ã -->
  <div *ngIf="activeTab === 'orders'" class="tab-content orders-tab">
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</h2>
    
    <!-- –§–∏–ª—å—Ç—Ä—ã –∑–∞–∫–∞–∑–æ–≤ -->
    <div class="filters-section">
      <div class="filters-grid">
        <div class="filter-group">
          <label for="orderStatus">–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞</label>
          <select id="orderStatus" [(ngModel)]="orderFilters.status" (change)="onOrderFilterChange()">
            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
            <option value="pending">–û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</option>
            <option value="confirmed">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</option>
            <option value="processing">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</option>
            <option value="shipped">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω</option>
            <option value="delivered">–î–æ—Å—Ç–∞–≤–ª–µ–Ω</option>
            <option value="cancelled">–û—Ç–º–µ–Ω–µ–Ω</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="orderDateFrom">–î–∞—Ç–∞ –æ—Ç</label>
          <input 
            type="date" 
            id="orderDateFrom" 
            [(ngModel)]="orderFilters.date_from" 
            (change)="onOrderFilterChange()"
          >
        </div>

        <div class="filter-group">
          <label for="orderDateTo">–î–∞—Ç–∞ –¥–æ</label>
          <input 
            type="date" 
            id="orderDateTo" 
            [(ngModel)]="orderFilters.date_to" 
            (change)="onOrderFilterChange()"
          >
        </div>

        <div class="filter-group">
          <label for="orderSearch">–ü–æ–∏—Å–∫</label>
          <input 
            type="text" 
            id="orderSearch" 
            placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–∫–∞–∑–∞–º..."
            [(ngModel)]="orderFilters.search" 
            (input)="onOrderFilterChange()"
          >
        </div>

        <div class="filter-actions">
          <button type="button" class="btn btn-secondary" (click)="clearOrderFilters()">
            –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
          </button>
          <button type="button" class="btn btn-primary" (click)="loadOrders()">
            üîÑ –û–±–Ω–æ–≤–∏—Ç—å
          </button>
        </div>
      </div>
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div *ngIf="ordersLoading" class="loading-indicator">
      <div class="spinner"></div>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</p>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div *ngIf="ordersError && !ordersLoading" class="error-message">
      {{ ordersError }}
      <button class="btn btn-small" (click)="loadOrders()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤ -->
    <div *ngIf="!ordersLoading && !ordersError" class="table-container">
      <div class="table-header">
        <h3>–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤: {{ orders.length }}</h3>
        <a routerLink="/admin/orders" class="btn btn-outline">
          üì¶ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        </a>
      </div>
      
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ö–ª–∏–µ–Ω—Ç</th>
            <th>Email/–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–°—É–º–º–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–∞—Ç–∞</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders; trackBy: trackByOrderId">
            <td>#{{ order.id }}</td>
            <td>
              <div class="customer-info">
                <strong>{{ order.guest_name || '–ì–æ—Å—Ç—å' }}</strong>
                <small *ngIf="order.is_anonymous">–ê–Ω–æ–Ω–∏–º–Ω—ã–π –∑–∞–∫–∞–∑</small>
              </div>
            </td>
            <td>
              <div class="contact-info">
                <div *ngIf="order.guest_phone">{{ order.guest_phone }}</div>
                <div *ngIf="order.guest_email">{{ order.guest_email }}</div>
              </div>
            </td>
            <td>{{ formatPrice(order.total_amount) }}</td>
            <td>
              <span class="status-badge" [class]="getOrderStatusClass(order.status)">
                {{ getOrderStatusText(order.status) }}
              </span>
            </td>
            <td>{{ formatDate(order.created_at) }}</td>
            <td>
              <button class="btn btn-small" (click)="viewOrderDetailsModal(order)" title="–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π">
                üëÅÔ∏è
              </button>
              <select class="status-select" (change)="updateOrderStatusModal(order, $event)">
                <option value="pending" [selected]="order.status === 'pending'">–û–∂–∏–¥–∞–µ—Ç</option>
                <option value="confirmed" [selected]="order.status === 'confirmed'">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</option>
                <option value="processing" [selected]="order.status === 'processing'">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</option>
                <option value="shipped" [selected]="order.status === 'shipped'">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω</option>
                <option value="delivered" [selected]="order.status === 'delivered'">–î–æ—Å—Ç–∞–≤–ª–µ–Ω</option>
                <option value="cancelled" [selected]="order.status === 'cancelled'">–û—Ç–º–µ–Ω–µ–Ω</option>
              </select>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="orders.length === 0" class="empty-state">
        <div class="empty-icon">üì¶</div>
        <h3>–ó–∞–∫–∞–∑–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p>–ü–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º –∑–∞–∫–∞–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
      </div>
    </div>
  </div>

  <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
  <div *ngIf="activeTab === 'users'" class="tab-content users-tab">
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div *ngIf="usersLoading" class="loading-indicator">
      <div class="spinner"></div>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</p>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div *ngIf="usersError && !usersLoading" class="error-message">
      {{ usersError }}
      <button class="btn btn-small" (click)="loadUsers()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <div *ngIf="!usersLoading && !usersError" class="table-container">
      <div class="table-header">
        <h3>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {{ users.length }}</h3>
        <button class="btn btn-primary" (click)="loadUsers()">
          üîÑ –û–±–Ω–æ–≤–∏—Ç—å
        </button>
      </div>
      
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
            <th>Email</th>
            <th>–†–æ–ª—å</th>
            <th>Email –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω</th>
            <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
            <th>–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>#{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>
              <span class="role-badge" [class]="getRoleClass(user.role)">
                {{ getRoleText(user.role) }}
              </span>
            </td>
            <td>
              <span class="status-badge" [class]="user.is_email_active ? 'status-active' : 'status-inactive'">
                {{ user.is_email_active ? '–î–∞' : '–ù–µ—Ç' }}
              </span>
            </td>
            <td>{{ formatDateString(user.created_at) }}</td>
            <td>{{ formatDateString(user.updated_at) }}</td>
            <td>
              <button class="btn btn-small" (click)="viewUserDetails(user)" title="–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π">üëÅÔ∏è</button>
              <button class="btn btn-small btn-primary" (click)="editUser(user)" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
              <button 
                class="btn btn-small btn-danger" 
                (click)="deleteUser(user)" 
                [disabled]="user.id === currentUser?.id"
                title="–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
              >
                üóëÔ∏è
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
  <div *ngIf="editingUser" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
        <button class="modal-close" (click)="cancelEdit()">√ó</button>
      </div>
      
      <form (ngSubmit)="saveUserChanges()" class="edit-form">
        <div class="form-group" [class.has-error]="hasFieldError('username')">
          <label for="edit-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *</label>
          <input
            type="text"
            id="edit-username"
            [(ngModel)]="editForm.username"
            name="username"
            required
            class="form-control"
            (input)="clearFieldError('username')"
            [class.error]="hasFieldError('username')"
          >
          <div *ngIf="hasFieldError('username')" class="error-message">
            {{ getFieldError('username') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasFieldError('email')">
          <label for="edit-email">Email *</label>
          <input
            type="email"
            id="edit-email"
            [(ngModel)]="editForm.email"
            name="email"
            required
            class="form-control"
            (input)="clearFieldError('email')"
            [class.error]="hasFieldError('email')"
          >
          <div *ngIf="hasFieldError('email')" class="error-message">
            {{ getFieldError('email') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasFieldError('role')">
          <label for="edit-role">–†–æ–ª—å *</label>
          <select
            id="edit-role"
            [(ngModel)]="editForm.role"
            name="role"
            required
            class="form-control"
            (change)="clearFieldError('role')"
            [class.error]="hasFieldError('role')"
          >
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
            <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
            <option value="moderator">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
          </select>
          <div *ngIf="hasFieldError('role')" class="error-message">
            {{ getFieldError('role') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasFieldError('address')">
          <label for="edit-address">–ê–¥—Ä–µ—Å</label>
          <input
            type="text"
            id="edit-address"
            [(ngModel)]="editForm.address"
            name="address"
            class="form-control"
            placeholder="–ù–µ —É–∫–∞–∑–∞–Ω"
            (input)="clearFieldError('address')"
            [class.error]="hasFieldError('address')"
          >
          <div *ngIf="hasFieldError('address')" class="error-message">
            {{ getFieldError('address') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasFieldError('phone')">
          <label for="edit-phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
          <input
            type="tel"
            id="edit-phone"
            [(ngModel)]="editForm.phone"
            name="phone"
            class="form-control"
            placeholder="–ù–µ —É–∫–∞–∑–∞–Ω"
            (input)="clearFieldError('phone')"
            [class.error]="hasFieldError('phone')"
          >
          <div *ngIf="hasFieldError('phone')" class="error-message">
            {{ getFieldError('phone') }}
          </div>
        </div>

        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input
              type="checkbox"
              [(ngModel)]="editForm.is_email_active"
              name="is_email_active"
            >
            Email –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
          </label>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cancelEdit()">
            –û—Ç–º–µ–Ω–∞
          </button>
          <button type="submit" class="btn btn-primary">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
  <div *ngIf="editingProduct" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h3>
        <button class="modal-close" (click)="cancelProductEdit()">√ó</button>
      </div>
      
      <form (ngSubmit)="saveProductChanges()" class="edit-form">
        <div class="form-group" [class.has-error]="hasProductFieldError('name')">
          <label for="edit-product-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
          <input
            type="text"
            id="edit-product-name"
            [(ngModel)]="productEditForm.name"
            name="name"
            required
            class="form-control"
            (input)="clearProductFieldError('name')"
            [class.error]="hasProductFieldError('name')"
          >
          <div *ngIf="hasProductFieldError('name')" class="error-message">
            {{ getProductFieldError('name') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasProductFieldError('description')">
          <label for="edit-product-description">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
          <textarea
            id="edit-product-description"
            [(ngModel)]="productEditForm.description"
            name="description"
            required
            class="form-control"
            rows="3"
            (input)="clearProductFieldError('description')"
            [class.error]="hasProductFieldError('description')"
          ></textarea>
          <div *ngIf="hasProductFieldError('description')" class="error-message">
            {{ getProductFieldError('description') }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group" [class.has-error]="hasProductFieldError('price')">
            <label for="edit-product-price">–¶–µ–Ω–∞ *</label>
            <input
              type="number"
              id="edit-product-price"
              [(ngModel)]="productEditForm.price"
              name="price"
              required
              min="0"
              step="0.01"
              class="form-control"
              (input)="clearProductFieldError('price')"
              [class.error]="hasProductFieldError('price')"
            >
            <div *ngIf="hasProductFieldError('price')" class="error-message">
              {{ getProductFieldError('price') }}
            </div>
          </div>

          <div class="form-group" [class.has-error]="hasProductFieldError('category_id')">
            <label for="edit-product-category">ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ *</label>
            <input
              type="number"
              id="edit-product-category"
              [(ngModel)]="productEditForm.category_id"
              name="category_id"
              required
              min="1"
              class="form-control"
              (input)="clearProductFieldError('category_id')"
              [class.error]="hasProductFieldError('category_id')"
            >
            <div *ngIf="hasProductFieldError('category_id')" class="error-message">
              {{ getProductFieldError('category_id') }}
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="edit-product-image">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
          <input
            type="url"
            id="edit-product-image"
            [(ngModel)]="productEditForm.image_url"
            name="image_url"
            class="form-control"
            placeholder="–í–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
          >
        </div>

        <div class="form-row">
          <div class="form-group" [class.has-error]="hasProductFieldError('stock')">
            <label for="edit-product-stock">–ó–∞–ø–∞—Å *</label>
            <input
              type="number"
              id="edit-product-stock"
              [(ngModel)]="productEditForm.stock"
              name="stock"
              required
              min="0"
              class="form-control"
              (input)="clearProductFieldError('stock')"
              [class.error]="hasProductFieldError('stock')"
            >
            <div *ngIf="hasProductFieldError('stock')" class="error-message">
              {{ getProductFieldError('stock') }}
            </div>
          </div>

          <div class="form-group">
            <label for="edit-product-stock-type">–¢–∏–ø –∑–∞–ø–∞—Å–∞</label>
            <select
              id="edit-product-stock-type"
              [(ngModel)]="productEditForm.stock_type"
              name="stock_type"
              class="form-control"
            >
              <option value="piece">–®—Ç—É–∫–∏</option>
              <option value="kg">–ö–∏–ª–æ–≥—Ä–∞–º–º—ã</option>
              <option value="m">–ú–µ—Ç—Ä—ã</option>
              <option value="l">–õ–∏—Ç—Ä—ã</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="edit-product-color">–¶–≤–µ—Ç</label>
            <input
              type="text"
              id="edit-product-color"
              [(ngModel)]="productEditForm.color"
              name="color"
              class="form-control"
              placeholder="–ù–µ —É–∫–∞–∑–∞–Ω"
            >
          </div>

          <div class="form-group">
            <label for="edit-product-size">–†–∞–∑–º–µ—Ä</label>
            <input
              type="text"
              id="edit-product-size"
              [(ngModel)]="productEditForm.size"
              name="size"
              class="form-control"
              placeholder="–ù–µ —É–∫–∞–∑–∞–Ω"
            >
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasProductFieldError('sku')">
          <label for="edit-product-sku">SKU *</label>
          <input
            type="text"
            id="edit-product-sku"
            [(ngModel)]="productEditForm.sku"
            name="sku"
            required
            class="form-control"
            (input)="clearProductFieldError('sku')"
            [class.error]="hasProductFieldError('sku')"
          >
          <div *ngIf="hasProductFieldError('sku')" class="error-message">
            {{ getProductFieldError('sku') }}
          </div>
        </div>

        <div class="form-group">
          <label for="edit-product-sort-order">–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
          <input
            type="number"
            id="edit-product-sort-order"
            [(ngModel)]="productEditForm.sort_order"
            name="sort_order"
            min="0"
            class="form-control"
          >
        </div>

        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input
              type="checkbox"
              [(ngModel)]="productEditForm.is_active"
              name="is_active"
            >
            –¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω
          </label>
        </div>

        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input
              type="checkbox"
              [(ngModel)]="productEditForm.is_featured"
              name="is_featured"
            >
            –ò–∑–±—Ä–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä
          </label>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cancelProductEdit()">
            –û—Ç–º–µ–Ω–∞
          </button>
          <button type="submit" class="btn btn-primary">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
  <div *ngIf="creatingProduct" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞</h3>
        <button class="modal-close" (click)="cancelProductCreate()">√ó</button>
      </div>
      
      <form (ngSubmit)="createNewProduct()" class="edit-form">
        <div class="form-group" [class.has-error]="hasProductFieldError('name')">
          <label for="create-product-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ *</label>
          <input
            type="text"
            id="create-product-name"
            [(ngModel)]="productCreateForm.name"
            name="name"
            required
            class="form-control"
            (input)="clearProductFieldError('name')"
            [class.error]="hasProductFieldError('name')"
          >
          <div *ngIf="hasProductFieldError('name')" class="error-message">
            {{ getProductFieldError('name') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasProductFieldError('description')">
          <label for="create-product-description">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
          <textarea
            id="create-product-description"
            [(ngModel)]="productCreateForm.description"
            name="description"
            required
            class="form-control"
            rows="3"
            (input)="clearProductFieldError('description')"
            [class.error]="hasProductFieldError('description')"
          ></textarea>
          <div *ngIf="hasProductFieldError('description')" class="error-message">
            {{ getProductFieldError('description') }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group" [class.has-error]="hasProductFieldError('price')">
            <label for="create-product-price">–¶–µ–Ω–∞ *</label>
            <input
              type="number"
              id="create-product-price"
              [(ngModel)]="productCreateForm.price"
              name="price"
              required
              min="0"
              step="0.01"
              class="form-control"
              (input)="clearProductFieldError('price')"
              [class.error]="hasProductFieldError('price')"
            >
            <div *ngIf="hasProductFieldError('price')" class="error-message">
              {{ getProductFieldError('price') }}
            </div>
          </div>

          <div class="form-group" [class.has-error]="hasProductFieldError('category_id')">
            <label for="create-product-category">ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ *</label>
            <input
              type="number"
              id="create-product-category"
              [(ngModel)]="productCreateForm.category_id"
              name="category_id"
              required
              min="1"
              class="form-control"
              (input)="clearProductFieldError('category_id')"
              [class.error]="hasProductFieldError('category_id')"
            >
            <div *ngIf="hasProductFieldError('category_id')" class="error-message">
              {{ getProductFieldError('category_id') }}
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="create-product-image">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
          <input
            type="url"
            id="create-product-image"
            [(ngModel)]="productCreateForm.image_url"
            name="image_url"
            class="form-control"
            placeholder="–í–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
          >
        </div>

        <div class="form-row">
          <div class="form-group" [class.has-error]="hasProductFieldError('stock')">
            <label for="create-product-stock">–ó–∞–ø–∞—Å *</label>
            <input
              type="number"
              id="create-product-stock"
              [(ngModel)]="productCreateForm.stock"
              name="stock"
              required
              min="0"
              class="form-control"
              (input)="clearProductFieldError('stock')"
              [class.error]="hasProductFieldError('stock')"
            >
            <div *ngIf="hasProductFieldError('stock')" class="error-message">
              {{ getProductFieldError('stock') }}
            </div>
          </div>

          <div class="form-group">
            <label for="create-product-stock-type">–¢–∏–ø –∑–∞–ø–∞—Å–∞</label>
            <select
              id="create-product-stock-type"
              [(ngModel)]="productCreateForm.stock_type"
              name="stock_type"
              class="form-control"
            >
              <option value="piece">–®—Ç—É–∫–∏</option>
              <option value="kg">–ö–∏–ª–æ–≥—Ä–∞–º–º—ã</option>
              <option value="m">–ú–µ—Ç—Ä—ã</option>
              <option value="l">–õ–∏—Ç—Ä—ã</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="create-product-color">–¶–≤–µ—Ç</label>
            <input
              type="text"
              id="create-product-color"
              [(ngModel)]="productCreateForm.color"
              name="color"
              class="form-control"
              placeholder="–ù–µ —É–∫–∞–∑–∞–Ω"
            >
          </div>

          <div class="form-group">
            <label for="create-product-size">–†–∞–∑–º–µ—Ä</label>
            <input
              type="text"
              id="create-product-size"
              [(ngModel)]="productCreateForm.size"
              name="size"
              class="form-control"
              placeholder="–ù–µ —É–∫–∞–∑–∞–Ω"
            >
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasProductFieldError('sku')">
          <label for="create-product-sku">SKU *</label>
          <input
            type="text"
            id="create-product-sku"
            [(ngModel)]="productCreateForm.sku"
            name="sku"
            required
            class="form-control"
            (input)="clearProductFieldError('sku')"
            [class.error]="hasProductFieldError('sku')"
          >
          <div *ngIf="hasProductFieldError('sku')" class="error-message">
            {{ getProductFieldError('sku') }}
          </div>
        </div>

        <div class="form-group">
          <label for="create-product-sort-order">–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
          <input
            type="number"
            id="create-product-sort-order"
            [(ngModel)]="productCreateForm.sort_order"
            name="sort_order"
            min="0"
            class="form-control"
          >
        </div>

        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input
              type="checkbox"
              [(ngModel)]="productCreateForm.is_active"
              name="is_active"
            >
            –¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω
          </label>
        </div>

        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input
              type="checkbox"
              [(ngModel)]="productCreateForm.is_featured"
              name="is_featured"
            >
            –ò–∑–±—Ä–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä
          </label>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cancelProductCreate()">
            –û—Ç–º–µ–Ω–∞
          </button>
          <button type="submit" class="btn btn-success">
            –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–≤–∞—Ä–∞ -->
  <div *ngIf="viewingProduct" class="modal-overlay">
    <div class="modal-content product-view-modal">
      <div class="modal-header">
        <h3>–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞</h3>
        <button class="modal-close" (click)="closeProductView()">√ó</button>
      </div>
      
      <div class="product-view-content">
        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ -->
        <div class="product-image-section">
          <img 
            [src]="viewingProduct.image_url" 
            [alt]="viewingProduct.name"
            class="product-view-image"
            (error)="onImageError($event)"
          >
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="product-info-section">
          <div class="info-group">
            <label>ID —Ç–æ–≤–∞—Ä–∞</label>
            <span class="info-value">#{{ viewingProduct.id }}</span>
          </div>

          <div class="info-group">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <span class="info-value product-name">{{ viewingProduct.name }}</span>
          </div>

          <div class="info-group">
            <label>SKU</label>
            <span class="info-value">{{ viewingProduct.sku }}</span>
          </div>

          <div class="info-group">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <span class="info-value product-description">{{ viewingProduct.description }}</span>
          </div>

          <div class="info-row">
            <div class="info-group">
              <label>–¶–µ–Ω–∞</label>
              <span class="info-value price-value">{{ formatPrice(viewingProduct.price) }}</span>
            </div>

            <div class="info-group">
              <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è ID</label>
              <span class="info-value">{{ viewingProduct.category_id }}</span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-group">
              <label>–ó–∞–ø–∞—Å</label>
              <span class="info-value stock-value" [class]="viewingProduct.stock === 0 ? 'stock-empty' : viewingProduct.stock < 10 ? 'stock-low' : 'stock-ok'">
                {{ viewingProduct.stock }} {{ viewingProduct.stock_type }}
              </span>
            </div>

            <div class="info-group">
              <label>–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
              <span class="info-value">{{ viewingProduct.sort_order }}</span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-group" *ngIf="viewingProduct.color">
              <label>–¶–≤–µ—Ç</label>
              <span class="info-value">{{ viewingProduct.color }}</span>
            </div>

            <div class="info-group" *ngIf="viewingProduct.size">
              <label>–†–∞–∑–º–µ—Ä</label>
              <span class="info-value">{{ viewingProduct.size }}</span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-group">
              <label>–°—Ç–∞—Ç—É—Å</label>
              <span class="info-value">
                <span class="status-badge" [class]="viewingProduct.is_active ? 'status-active' : 'status-inactive'">
                  {{ viewingProduct.is_active ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω' }}
                </span>
              </span>
            </div>

            <div class="info-group">
              <label>–ò–∑–±—Ä–∞–Ω–Ω—ã–π</label>
              <span class="info-value">
                <span *ngIf="viewingProduct.is_featured" class="featured-badge">‚≠ê –î–∞</span>
                <span *ngIf="!viewingProduct.is_featured">–ù–µ—Ç</span>
              </span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-group">
              <label>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</label>
              <span class="info-value">{{ formatDateString(viewingProduct.created_at) }}</span>
            </div>

            <div class="info-group">
              <label>–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</label>
              <span class="info-value">{{ formatDateString(viewingProduct.updated_at) }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" (click)="editProduct(viewingProduct)">
          ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="btn btn-secondary" (click)="closeProductView()">
          –ó–∞–∫—Ä—ã—Ç—å
        </button>
      </div>
    </div>
  </div>

  <!-- –¢–æ–≤–∞—Ä—ã -->
  <div *ngIf="activeTab === 'products'" class="tab-content products-tab">
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h2>
    
    <!-- –§–∏–ª—å—Ç—Ä—ã —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div class="filters-section">
      <div class="filters-grid">
        <div class="filter-group">
          <label for="product-search">–ü–æ–∏—Å–∫</label>
          <input
            type="text"
            id="product-search"
            [(ngModel)]="productFilters.search"
            placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞..."
            class="form-control"
          >
        </div>

        <div class="filter-group">
          <label for="product-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          <input
            type="text"
            id="product-category"
            [(ngModel)]="productFilters.category_id"
            placeholder="ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏..."
            class="form-control"
          >
        </div>

        <div class="filter-group">
          <label for="product-min-price">–ú–∏–Ω. —Ü–µ–Ω–∞</label>
          <input
            type="number"
            id="product-min-price"
            [(ngModel)]="productFilters.min_price"
            placeholder="0"
            class="form-control"
          >
        </div>

        <div class="filter-group">
          <label for="product-max-price">–ú–∞–∫—Å. —Ü–µ–Ω–∞</label>
          <input
            type="number"
            id="product-max-price"
            [(ngModel)]="productFilters.max_price"
            placeholder="999999"
            class="form-control"
          >
        </div>
      </div>

      <div class="filters-actions">
        <button class="btn btn-primary" (click)="applyProductFilters()">
          üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
        </button>
        <button class="btn btn-secondary" (click)="resetProductFilters()">
          üîÑ –°–±—Ä–æ—Å–∏—Ç—å
        </button>
      </div>
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div *ngIf="productsLoading" class="loading-indicator">
      <div class="spinner"></div>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</p>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div *ngIf="productsError && !productsLoading" class="error-message">
      {{ productsError }}
      <button class="btn btn-small" (click)="loadProducts()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div *ngIf="!productsLoading && !productsError" class="table-container">
      <div class="table-header">
        <h3>–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: {{ totalProducts }}</h3>
        <div class="table-actions">
          <button class="btn btn-success" (click)="createProduct()">
            ‚ûï –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
          </button>
          <button class="btn btn-primary" (click)="loadProducts()">
            üîÑ –û–±–Ω–æ–≤–∏—Ç—å
          </button>
        </div>
      </div>
      
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–ó–∞–ø–∞—Å</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products">
            <td>#{{ product.id }}</td>
            <td>
              <img 
                [src]="product.image_url" 
                [alt]="product.name"
                class="product-thumbnail"
                (error)="onImageError($event)"
              >
            </td>
            <td>
              <div class="product-info">
                <strong>{{ product.name }}</strong>
                <small>{{ product.sku }}</small>
              </div>
            </td>
            <td>{{ product.category_id }}</td>
            <td>{{ formatPrice(product.price) }}</td>
            <td>
              <span class="stock-badge" [class]="product.stock === 0 ? 'stock-empty' : product.stock < 10 ? 'stock-low' : 'stock-ok'">
                {{ product.stock }}
              </span>
            </td>
            <td>
              <div class="status-indicators">
                <span class="status-badge" [class]="product.is_active ? 'status-active' : 'status-inactive'">
                  {{ product.is_active ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω' }}
                </span>
                <span *ngIf="product.is_featured" class="featured-badge">‚≠ê</span>
              </div>
            </td>
            <td>
              <button class="btn btn-small" (click)="viewProductDetails(product)" title="–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π">üëÅÔ∏è</button>
              <button class="btn btn-small btn-primary" (click)="editProduct(product)" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
              <button 
                class="btn btn-small btn-danger" 
                (click)="deleteProduct(product)" 
                title="–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä"
              >
                üóëÔ∏è
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
      <div *ngIf="totalProductPages > 1" class="pagination">
        <button 
          class="btn btn-small" 
          [disabled]="currentPage === 1"
          (click)="changeProductPage(currentPage - 1)"
        >
          ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è
        </button>
        
        <span class="page-info">
          –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ currentPage }} –∏–∑ {{ totalProductPages }}
        </span>
        
        <button 
          class="btn btn-small" 
          [disabled]="currentPage === totalProductPages"
          (click)="changeProductPage(currentPage + 1)"
        >
          –°–ª–µ–¥—É—é—â–∞—è ‚Üí
        </button>
      </div>
    </div>
  </div>

  <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <div *ngIf="activeTab === 'categories'" class="tab-content categories-tab">
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h2>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div *ngIf="categoriesLoading" class="loading-indicator">
      <div class="spinner"></div>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...</p>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div *ngIf="categoriesError && !categoriesLoading" class="error-message">
      {{ categoriesError }}
      <button class="btn btn-small" (click)="loadCategories()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
    <div *ngIf="!categoriesLoading && !categoriesError" class="table-container">
      <div class="table-header">
        <h3>–í—Å–µ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {{ categories.length }}</h3>
        <div class="table-actions">
          <button class="btn btn-success" (click)="createCategory()">
            ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
          </button>
          <button class="btn btn-primary" (click)="loadCategories()">
            üîÑ –û–±–Ω–æ–≤–∏—Ç—å
          </button>
        </div>
      </div>
      
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th>–¢–æ–≤–∞—Ä–æ–≤</th>
            <th>–ü–æ—Ä—è–¥–æ–∫</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let category of categories; trackBy: trackByCategoryId" [attr.data-category-id]="category.id">
            <td>#{{ category.id }}</td>
            <td>
              <img 
                [src]="category.image_url" 
                [alt]="category.name"
                class="category-thumbnail"
                (error)="onCategoryImageError($event)"
                *ngIf="category.image_url && category.image_url.trim(); else placeholderImage"
              >
              <ng-template #placeholderImage>
                <div class="category-thumbnail-placeholder">
                  <img src="assets/images/placeholder.svg" alt="Placeholder" class="placeholder-img">
                </div>
              </ng-template>
            </td>
            <td>
              <div class="category-info">
                <strong>{{ category.name }}</strong>
              </div>
            </td>
            <td>{{ category.description }}</td>
            <td>
              <span class="product-count-badge" [class]="category.product_count === 0 ? 'count-zero' : 'count-ok'">
                {{ category.product_count }}
              </span>
            </td>
            <td>{{ category.sort_order }}</td>
            <td>
              <span class="status-badge" [class]="category.is_active ? 'status-active' : 'status-inactive'">
                {{ category.is_active ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞' }}
              </span>
            </td>
            <td>
              <button class="btn btn-small" (click)="viewCategoryDetails(category)" title="–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π">üëÅÔ∏è</button>
              <button class="btn btn-small btn-primary" (click)="editCategory(category)" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
              <button 
                class="btn btn-small btn-danger" 
                (click)="deleteCategory(category)" 
                [disabled]="category.product_count > 0"
                title="–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"
              >
                üóëÔ∏è
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <div *ngIf="creatingCategory" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
        <button class="modal-close" (click)="cancelCategoryCreate()">√ó</button>
      </div>
      
      <form (ngSubmit)="createNewCategory()" class="edit-form">
        <div class="form-group" [class.has-error]="hasCategoryFieldError('name')">
          <label for="create-category-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ *</label>
          <input
            type="text"
            id="create-category-name"
            [(ngModel)]="categoryCreateForm.name"
            name="name"
            required
            class="form-control"
            (input)="clearCategoryFieldError('name')"
            [class.error]="hasCategoryFieldError('name')"
          >
          <div *ngIf="hasCategoryFieldError('name')" class="error-message">
            {{ getCategoryFieldError('name') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasCategoryFieldError('description')">
          <label for="create-category-description">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
          <textarea
            id="create-category-description"
            [(ngModel)]="categoryCreateForm.description"
            name="description"
            required
            class="form-control"
            rows="3"
            (input)="clearCategoryFieldError('description')"
            [class.error]="hasCategoryFieldError('description')"
          ></textarea>
          <div *ngIf="hasCategoryFieldError('description')" class="error-message">
            {{ getCategoryFieldError('description') }}
          </div>
        </div>

        <div class="form-group">
          <label for="create-category-image">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
          <input
            type="url"
            id="create-category-image"
            [(ngModel)]="categoryCreateForm.image_url"
            name="image_url"
            class="form-control"
            placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è placeholder"
          >
          <small class="form-text text-muted">–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å URL, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="create-category-sort-order">–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
            <input
              type="number"
              id="create-category-sort-order"
              [(ngModel)]="categoryCreateForm.sort_order"
              name="sort_order"
              min="0"
              class="form-control"
            >
          </div>

          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input
                type="checkbox"
                [(ngModel)]="categoryCreateForm.is_active"
                name="is_active"
              >
              –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–∞
            </label>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cancelCategoryCreate()">
            –û—Ç–º–µ–Ω–∞
          </button>
          <button type="submit" class="btn btn-success">
            –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <div *ngIf="editingCategory" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
        <button class="modal-close" (click)="cancelCategoryEdit()">√ó</button>
      </div>
      
      <form (ngSubmit)="saveCategoryChanges()" class="edit-form">
        <div class="form-group" [class.has-error]="hasCategoryFieldError('name')">
          <label for="edit-category-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ *</label>
          <input
            type="text"
            id="edit-category-name"
            [(ngModel)]="categoryEditForm.name"
            name="name"
            required
            class="form-control"
            (input)="clearCategoryFieldError('name')"
            [class.error]="hasCategoryFieldError('name')"
          >
          <div *ngIf="hasCategoryFieldError('name')" class="error-message">
            {{ getCategoryFieldError('name') }}
          </div>
        </div>

        <div class="form-group" [class.has-error]="hasCategoryFieldError('description')">
          <label for="edit-category-description">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
          <textarea
            id="edit-category-description"
            [(ngModel)]="categoryEditForm.description"
            name="description"
            required
            class="form-control"
            rows="3"
            (input)="clearCategoryFieldError('description')"
            [class.error]="hasCategoryFieldError('description')"
          ></textarea>
          <div *ngIf="hasCategoryFieldError('description')" class="error-message">
            {{ getCategoryFieldError('description') }}
          </div>
        </div>

        <div class="form-group">
          <label for="edit-category-image">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
          <input
            type="url"
            id="edit-category-image"
            [(ngModel)]="categoryEditForm.image_url"
            name="image_url"
            class="form-control"
            placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è placeholder"
          >
          <small class="form-text text-muted">–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å URL, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="edit-category-sort-order">–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
            <input
              type="number"
              id="edit-category-sort-order"
              [(ngModel)]="categoryEditForm.sort_order"
              name="sort_order"
              min="0"
              class="form-control"
            >
          </div>

          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input
                type="checkbox"
                [(ngModel)]="categoryEditForm.is_active"
                name="is_active"
              >
              –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–∞
            </label>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cancelCategoryEdit()">
            –û—Ç–º–µ–Ω–∞
          </button>
          <button type="submit" class="btn btn-primary">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <div *ngIf="viewingCategory" class="modal-overlay">
    <div class="modal-content category-view-modal">
      <div class="modal-header">
        <h3>–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
        <button class="modal-close" (click)="closeCategoryView()">√ó</button>
      </div>
      
      <div class="category-view-content">
        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="category-image-section">
          <img 
            [src]="viewingCategory.image_url" 
            [alt]="viewingCategory.name"
            class="category-view-image"
            (error)="onCategoryImageError($event)"
            *ngIf="viewingCategory.image_url && viewingCategory.image_url.trim(); else placeholderViewImage"
          >
          <ng-template #placeholderViewImage>
            <div class="category-view-placeholder">
              <img src="assets/images/placeholder.svg" alt="Placeholder" class="placeholder-img">
              <p>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ</p>
            </div>
          </ng-template>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="category-info-section">
          <div class="info-group">
            <label>ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
            <span class="info-value">#{{ viewingCategory.id }}</span>
          </div>

          <div class="info-group">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <span class="info-value category-name">{{ viewingCategory.name }}</span>
          </div>

          <div class="info-group">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <span class="info-value category-description">{{ viewingCategory.description }}</span>
          </div>

          <div class="info-row">
            <div class="info-group">
              <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤</label>
              <span class="info-value product-count-value" [class]="viewingCategory.product_count === 0 ? 'count-zero' : 'count-ok'">
                {{ viewingCategory.product_count }}
              </span>
            </div>

            <div class="info-group">
              <label>–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
              <span class="info-value">{{ viewingCategory.sort_order }}</span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-group">
              <label>–°—Ç–∞—Ç—É—Å</label>
              <span class="info-value">
                <span class="status-badge" [class]="viewingCategory.is_active ? 'status-active' : 'status-inactive'">
                  {{ viewingCategory.is_active ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞' }}
                </span>
              </span>
            </div>
          </div>

          <div class="info-row">
            <div class="info-group">
              <label>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</label>
              <span class="info-value">{{ formatDateString(viewingCategory.created_at) }}</span>
            </div>

            <div class="info-group">
              <label>–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</label>
              <span class="info-value">{{ formatDateString(viewingCategory.updated_at) }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" (click)="editCategory(viewingCategory)">
          ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="btn btn-secondary" (click)="closeCategoryView()">
          –ó–∞–∫—Ä—ã—Ç—å
        </button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–∫–∞–∑–∞ -->
  <div *ngIf="showOrderModal" class="modal-overlay" (click)="closeOrderModal()">
    <div class="modal-content order-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>–ó–∞–∫–∞–∑ ‚Ññ{{ selectedOrder?.id }}</h3>
        <button class="modal-close" (click)="closeOrderModal()">√ó</button>
      </div>
      
      <div *ngIf="selectedOrder" class="order-details">
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ -->
        <div class="order-info-section">
          <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ</h4>
          <div class="info-grid">
            <div class="info-item">
              <label>–°—Ç–∞—Ç—É—Å:</label>
              <span class="status-badge" [class]="getOrderStatusClass(selectedOrder.status)">
                {{ getOrderStatusText(selectedOrder.status) }}
              </span>
            </div>
            <div class="info-item">
              <label>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</label>
              <span>{{ formatDate(selectedOrder.created_at) }}</span>
            </div>
            <div class="info-item">
              <label>–û–±—â–∞—è —Å—É–º–º–∞:</label>
              <span class="price">{{ formatPrice(selectedOrder.total_amount) }}</span>
            </div>
            <div class="info-item" *ngIf="selectedOrder.guest_name">
              <label>–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞:</label>
              <span>{{ selectedOrder.guest_name }}</span>
            </div>
            <div class="info-item" *ngIf="selectedOrder.guest_phone">
              <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
              <span>{{ selectedOrder.guest_phone }}</span>
            </div>
            <div class="info-item" *ngIf="selectedOrder.guest_email">
              <label>Email:</label>
              <span>{{ selectedOrder.guest_email }}</span>
            </div>
            <div class="info-item" *ngIf="selectedOrder.shipping_address">
              <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
              <span>{{ selectedOrder.shipping_address }}</span>
            </div>
            <div class="info-item" *ngIf="selectedOrder.billing_address">
              <label>–ê–¥—Ä–µ—Å –æ–ø–ª–∞—Ç—ã:</label>
              <span>{{ selectedOrder.billing_address }}</span>
            </div>
            <div class="info-item" *ngIf="selectedOrder.notes">
              <label>–ó–∞–º–µ—Ç–∫–∏:</label>
              <span>{{ selectedOrder.notes }}</span>
            </div>
          </div>
        </div>

        <!-- –¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ -->
        <div class="order-items-section">
          <h4>–¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ</h4>
          <div class="items-list">
            <div *ngFor="let item of selectedOrder.items" class="order-item">
              <div class="item-image">
                <img [src]="item.product_image || '/assets/images/placeholder.svg'" 
                     [alt]="item.product_name"
                     (error)="onImageError($event)">
              </div>
              <div class="item-details">
                <h5>{{ item.product_name || '–¢–æ–≤–∞—Ä #' + item.product_id }}</h5>
                <p class="item-price">{{ formatPrice(item.price) }} √ó {{ item.quantity }}</p>
              </div>
              <div class="item-total">
                {{ formatPrice(item.total) }}
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-actions">
        <button class="btn btn-primary" (click)="closeOrderModal()">
          –ó–∞–∫—Ä—ã—Ç—å
        </button>
      </div>
    </div>
  </div>
</div>
